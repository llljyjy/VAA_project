<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jiayi, Firdaus &amp; Victoria">
<meta name="dcterms.date" content="2024-02-22">

<title>ISSS608-G1 - Data Preparation &amp; Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../image/burger.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-proposal" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Proposal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-proposal">    
        <li>
    <a class="dropdown-item" href="../../proposal/proposal.html" rel="" target="">
 <span class="dropdown-text">Project Proposal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prototype" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Prototype</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-prototype">    
        <li>
    <a class="dropdown-item" href="../../prototype/data_preparation/data_preparation_and_cleaning.html" rel="" target="">
 <span class="dropdown-text">1.0 Data Preparation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://iss608-vaa-victorianeo.netlify.app/take-home_ex/take-home_ex04/take_home_ex04" rel="" target="">
 <span class="dropdown-text">Univariate Analysis &amp; Panel Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://isss608-24jan-jiayili.netlify.app/take-home_ex/take-home_ex04/take-home_ex04" rel="" target="">
 <span class="dropdown-text">Multi-varient Analysis &amp; TS Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://isss608-ay2324-vaa.netlify.app/take-home_exercises/take-home_ex04/take-home_exercise04" rel="" target="">
 <span class="dropdown-text">Big Mac Index Choropleth and Trade Network Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-project" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Project</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-project">    
        <li>
    <a class="dropdown-item" href="../../project/website.html" rel="" target="">
 <span class="dropdown-text">website</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#launching-r-packages-and-data-import" id="toc-launching-r-packages-and-data-import" class="nav-link active" data-scroll-target="#launching-r-packages-and-data-import">1. Launching R Packages and Data Import</a>
  <ul class="collapse">
  <li><a href="#import-package" id="toc-import-package" class="nav-link" data-scroll-target="#import-package">Import Package</a></li>
  <li><a href="#import-big-mac-data" id="toc-import-big-mac-data" class="nav-link" data-scroll-target="#import-big-mac-data">Import Big Mac Data</a></li>
  <li><a href="#import-complementary-data-set" id="toc-import-complementary-data-set" class="nav-link" data-scroll-target="#import-complementary-data-set">Import Complementary Data Set</a></li>
  </ul></li>
  <li><a href="#data-wrangling-and-merging" id="toc-data-wrangling-and-merging" class="nav-link" data-scroll-target="#data-wrangling-and-merging">2. Data Wrangling and Merging</a>
  <ul class="collapse">
  <li><a href="#big-mac-dat" id="toc-big-mac-dat" class="nav-link" data-scroll-target="#big-mac-dat">BIG MAC DAT</a>
  <ul class="collapse">
  <li><a href="#local-price" id="toc-local-price" class="nav-link" data-scroll-target="#local-price">local price %</a></li>
  </ul></li>
  <li><a href="#other-data" id="toc-other-data" class="nav-link" data-scroll-target="#other-data">other data</a>
  <ul class="collapse">
  <li><a href="#export" id="toc-export" class="nav-link" data-scroll-target="#export">export</a></li>
  <li><a href="#gdp-data" id="toc-gdp-data" class="nav-link" data-scroll-target="#gdp-data">GDP data</a></li>
  <li><a href="#gdp-per-capita" id="toc-gdp-per-capita" class="nav-link" data-scroll-target="#gdp-per-capita">GDP per Capita</a></li>
  <li><a href="#inflation" id="toc-inflation" class="nav-link" data-scroll-target="#inflation">inflation</a></li>
  <li><a href="#unemployment" id="toc-unemployment" class="nav-link" data-scroll-target="#unemployment">unemployment</a></li>
  <li><a href="#hdi" id="toc-hdi" class="nav-link" data-scroll-target="#hdi">hdi</a></li>
  <li><a href="#population" id="toc-population" class="nav-link" data-scroll-target="#population">population</a></li>
  </ul></li>
  <li><a href="#check-for-missing-data" id="toc-check-for-missing-data" class="nav-link" data-scroll-target="#check-for-missing-data">check for missing data</a></li>
  <li><a href="#combine-with-country" id="toc-combine-with-country" class="nav-link" data-scroll-target="#combine-with-country">combine with country</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Preparation &amp; Cleaning</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jiayi, Firdaus &amp; Victoria </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 22, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 14, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="launching-r-packages-and-data-import" class="level1">
<h1>1. Launching R Packages and Data Import</h1>
<section id="import-package" class="level2">
<h2 class="anchored" data-anchor-id="import-package">Import Package</h2>
<p>The following code snippet imports the necessary packages used for our analysis:</p>
<ul>
<li><p><strong>Tidyverse:</strong> An aggregation of R packages designed for data science.</p></li>
<li><p><strong>Dplyr and tidyr:</strong> Part of the tidyverse, these packages are instrumental in data manipulation and tidying, respectively.</p></li>
<li><p><strong>Readxl:</strong> Facilitates the import of Excel files.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, readxl, dplyr, tidyr) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-big-mac-data" class="level2">
<h2 class="anchored" data-anchor-id="import-big-mac-data">Import Big Mac Data</h2>
<p>The code below imports the Big Mac dataset, which serves as the primary data source for this analysis. The dataset is in CSV format and was downloaded from <a href="https://github.com/TheEconomist/big-mac-data/tree/master/output-data">the Economist’s GitHub</a> page. Prior to import, some less relevant columns were removed for clarity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>big_mac <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/big_mac.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dataset comprises 9 columns, encompassing 1,386 entries across 29 countries and regions from the year 2000 onward. Notably, for some countries, there are multiple records per year. The date column is initially in character format and requires conversion to a date format for accurate analysis.</p>
<p>The code chunk below converts the date column to a date format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>big_mac<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">dmy</span>(big_mac<span class="sc">$</span>date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>select only useful col</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>big_mac <span class="ot">&lt;-</span> big_mac <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, currency_code, name, local_price, dollar_price)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code below provides a preview of the Big Mac dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(big_mac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  date       currency_code name      local_price dollar_price
  &lt;date&gt;     &lt;chr&gt;         &lt;chr&gt;           &lt;dbl&gt;        &lt;dbl&gt;
1 2000-04-01 ARS           Argentina        2.5          2.5 
2 2000-04-01 AUD           Australia        2.59         1.54
3 2000-04-01 BRL           Brazil           2.95         1.65
4 2000-04-01 GBP           Britain          1.9          3.00
5 2000-04-01 CAD           Canada           2.85         1.94
6 2000-04-01 CLP           Chile         1260            2.45</code></pre>
</div>
</div>
</section>
<section id="import-complementary-data-set" class="level2">
<h2 class="anchored" data-anchor-id="import-complementary-data-set">Import Complementary Data Set</h2>
<p>complementary dataset are imported to add in additional indicators</p>
<ul>
<li><p>import export data</p></li>
<li><p>GDP</p></li>
<li><p>GDP per Capita</p></li>
<li><p>inflation</p></li>
<li><p>GDP per Employed</p></li>
<li><p>Unemployment Rate</p></li>
<li><p>Human Development Index (HDI)</p></li>
<li><p>Population</p></li>
</ul>
<p>Other then import export data is from <a href="https://www.kaggle.com/datasets/muhammadtalhaawan/world-export-and-import-dataset">Kaggle</a>, all other indicators are from the <a href="https://databank.worldbank.org/reports.aspx?source=2&amp;series=NY.GDP.MKTP.KD.ZG&amp;country=">World Bank</a></p>
<p>The code chunk below imports the import export data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>export <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/export.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(export)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 33
  `Partner Name`  Year `Export (US$ Thousand)` `Import (US$ Thousand)`
  &lt;chr&gt;          &lt;dbl&gt;                   &lt;dbl&gt;                   &lt;dbl&gt;
1 Aruba           1988                   3498.                    328.
2 Afghanistan     1988                 213030.                  54460.
3 Angola          1988                 375528.                 370703.
4 Anguila         1988                    367.                      4 
5 Albania         1988                  30104.                  47709.
6 Andorra         1988                  67924.                   3284.
# ℹ 29 more variables: `Export Product Share (%)` &lt;dbl&gt;,
#   `Import Product Share (%)` &lt;dbl&gt;, `Revealed comparative advantage` &lt;dbl&gt;,
#   `World Growth (%)` &lt;dbl&gt;, `Country Growth (%)` &lt;dbl&gt;,
#   `AHS Simple Average (%)` &lt;dbl&gt;, `AHS Weighted Average (%)` &lt;dbl&gt;,
#   `AHS Total Tariff Lines` &lt;dbl&gt;,
#   `AHS Dutiable Tariff Lines Share (%)` &lt;dbl&gt;,
#   `AHS Duty Free Tariff Lines Share (%)` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>the table is in long format</p>
<p>the code chunk below imports</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/gdp.csv"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>gdp_capita <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/gdp_capita.csv"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>gdp_employed <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/gdp_employed.csv"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>inflation <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/inflation.csv"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>unemployment <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/unemployment_rate.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>the code chunk below display an overview of the dataframe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 27
  `Series Name`     `Series Code`  `Country Name` `Country Code` `2000 [YR2000]`
  &lt;chr&gt;             &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          
1 GDP (current US$) NY.GDP.MKTP.CD Afghanistan    AFG            ..             
2 GDP (current US$) NY.GDP.MKTP.CD Albania        ALB            3480355258     
3 GDP (current US$) NY.GDP.MKTP.CD Algeria        DZA            54790398570    
4 GDP (current US$) NY.GDP.MKTP.CD American Samoa ASM            ..             
5 GDP (current US$) NY.GDP.MKTP.CD Andorra        AND            1429047882     
6 GDP (current US$) NY.GDP.MKTP.CD Angola         AGO            9129594816     
# ℹ 22 more variables: `2001 [YR2001]` &lt;chr&gt;, `2002 [YR2002]` &lt;chr&gt;,
#   `2003 [YR2003]` &lt;chr&gt;, `2004 [YR2004]` &lt;chr&gt;, `2005 [YR2005]` &lt;chr&gt;,
#   `2006 [YR2006]` &lt;chr&gt;, `2007 [YR2007]` &lt;chr&gt;, `2008 [YR2008]` &lt;chr&gt;,
#   `2009 [YR2009]` &lt;chr&gt;, `2010 [YR2010]` &lt;chr&gt;, `2011 [YR2011]` &lt;chr&gt;,
#   `2012 [YR2012]` &lt;chr&gt;, `2013 [YR2013]` &lt;chr&gt;, `2014 [YR2014]` &lt;chr&gt;,
#   `2015 [YR2015]` &lt;chr&gt;, `2016 [YR2016]` &lt;chr&gt;, `2017 [YR2017]` &lt;chr&gt;,
#   `2018 [YR2018]` &lt;chr&gt;, `2019 [YR2019]` &lt;chr&gt;, `2020 [YR2020]` &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>these indicators are in short format and it is necessary to convert it to long format first so that it can join with the big mac table</p>
<p>the function below converts the input into a long table format</p>
<p>to be updated</p>
<p>hdi is in long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hdi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/human-development-index.csv"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/population.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-wrangling-and-merging" class="level1">
<h1>2. Data Wrangling and Merging</h1>
<section id="big-mac-dat" class="level2">
<h2 class="anchored" data-anchor-id="big-mac-dat">BIG MAC DAT</h2>
<p>convert date to year</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>big_mac<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">year</span>(big_mac<span class="sc">$</span>date)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>big_mac</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,386 × 6
   date       currency_code name           local_price dollar_price  year
   &lt;date&gt;     &lt;chr&gt;         &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;
 1 2000-04-01 ARS           Argentina             2.5          2.5   2000
 2 2000-04-01 AUD           Australia             2.59         1.54  2000
 3 2000-04-01 BRL           Brazil                2.95         1.65  2000
 4 2000-04-01 GBP           Britain               1.9          3.00  2000
 5 2000-04-01 CAD           Canada                2.85         1.94  2000
 6 2000-04-01 CLP           Chile              1260            2.45  2000
 7 2000-04-01 CNY           China                 9.9          1.20  2000
 8 2000-04-01 CZK           Czech Republic       54.4          1.39  2000
 9 2000-04-01 DKK           Denmark              24.8          3.08  2000
10 2000-04-01 HKD           Hong Kong            10.2          1.31  2000
# ℹ 1,376 more rows</code></pre>
</div>
</div>
<p>some of country name is not consistent, rename</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>big_mac <span class="ot">&lt;-</span> big_mac <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> name </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>check number of records per year</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>entries_per_year_country <span class="ot">&lt;-</span> big_mac <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, name) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As most countries only contains 1 record each year, the earliest record for each year will be kept for easier manipulation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>first_records <span class="ot">&lt;-</span> big_mac <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, name) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>rename some variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>big_mac_new <span class="ot">&lt;-</span> first_records <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">country =</span> name, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>         year, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>         currency_code, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">bmi_localprice =</span> local_price, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">bmi_usd_price =</span> dollar_price</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="local-price" class="level3">
<h3 class="anchored" data-anchor-id="local-price">local price %</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>big_mac_new <span class="ot">&lt;-</span> big_mac_new <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span>  </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(country, currency_code, year) <span class="sc">%&gt;%</span>  </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi_change =</span> (bmi_localprice <span class="sc">/</span> <span class="fu">lag</span>(bmi_localprice) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(big_mac_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country    year currency_code bmi_localprice bmi_usd_price bmi_change
  &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;
1 Argentina  2000 ARS                     2.5          2.5        NA   
2 Argentina  2001 ARS                     2.5          2.5         0   
3 Argentina  2002 ARS                     2.5          0.799       0   
4 Argentina  2003 ARS                     4.1          1.42       64   
5 Argentina  2004 ARS                     4.36         1.48        6.34
6 Argentina  2005 ARS                     4.75         1.64        8.94</code></pre>
</div>
</div>
</section>
</section>
<section id="other-data" class="level2">
<h2 class="anchored" data-anchor-id="other-data">other data</h2>
<section id="export" class="level3">
<h3 class="anchored" data-anchor-id="export">export</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(export)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 33
  `Partner Name`  Year `Export (US$ Thousand)` `Import (US$ Thousand)`
  &lt;chr&gt;          &lt;dbl&gt;                   &lt;dbl&gt;                   &lt;dbl&gt;
1 Aruba           1988                   3498.                    328.
2 Afghanistan     1988                 213030.                  54460.
3 Angola          1988                 375528.                 370703.
4 Anguila         1988                    367.                      4 
5 Albania         1988                  30104.                  47709.
6 Andorra         1988                  67924.                   3284.
# ℹ 29 more variables: `Export Product Share (%)` &lt;dbl&gt;,
#   `Import Product Share (%)` &lt;dbl&gt;, `Revealed comparative advantage` &lt;dbl&gt;,
#   `World Growth (%)` &lt;dbl&gt;, `Country Growth (%)` &lt;dbl&gt;,
#   `AHS Simple Average (%)` &lt;dbl&gt;, `AHS Weighted Average (%)` &lt;dbl&gt;,
#   `AHS Total Tariff Lines` &lt;dbl&gt;,
#   `AHS Dutiable Tariff Lines Share (%)` &lt;dbl&gt;,
#   `AHS Duty Free Tariff Lines Share (%)` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>rename export column and filter important columns for joining</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>export_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(export, <span class="at">country =</span> <span class="st">`</span><span class="at">Partner Name</span><span class="st">`</span>, <span class="at">year =</span> Year) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>         year,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">export_usd =</span> <span class="st">`</span><span class="at">Export (US$ Thousand)</span><span class="st">`</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">import_usd =</span> <span class="st">`</span><span class="at">Import (US$ Thousand)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>understand net trading $</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>export_data <span class="ot">&lt;-</span> export_data <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">net_export =</span> export_usd <span class="sc">-</span> import_usd)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(export_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  country      year export_usd import_usd net_export
  &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Aruba        1988      3498.       328.      3170.
2 Afghanistan  1988    213030.     54460.    158571.
3 Angola       1988    375528.    370703.      4825.
4 Anguila      1988       367.         4        363.
5 Albania      1988     30104.     47709.    -17606.
6 Andorra      1988     67924.      3284.     64640.</code></pre>
</div>
</div>
<p>rename some of the country and location name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>export_data <span class="ot">&lt;-</span> export_data <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Hong Kong, China"</span> <span class="sc">~</span> <span class="st">"Hong Kong"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Egypt, Arab Rep.'</span> <span class="sc">~</span> <span class="st">'Egypt'</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>join the big mac data with export data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(big_mac_new, export_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="gdp-data" class="level3">
<h3 class="anchored" data-anchor-id="gdp-data">GDP data</h3>
<p>reformat to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>gdp_long_format <span class="ot">&lt;-</span> gdp <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>),  </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4} </span><span class="sc">\\</span><span class="st">[YR(</span><span class="sc">\\</span><span class="st">d{4})</span><span class="sc">\\</span><span class="st">]"</span>,  </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"GDP"</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">country =</span> <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, year, GDP)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>gdp_long_format<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(gdp_long_format<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>convert missing data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>gdp_long_format <span class="ot">&lt;-</span> gdp_long_format <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GDP =</span> <span class="fu">na_if</span>(GDP, <span class="st">".."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>rename columns in GDP</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>gdp_long_format <span class="ot">&lt;-</span> gdp_long_format <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>join big mac data with gdp</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data, gdp_long_format, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="gdp-per-capita" class="level3">
<h3 class="anchored" data-anchor-id="gdp-per-capita">GDP per Capita</h3>
<p>reformat to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>gdp_capita_long_format <span class="ot">&lt;-</span> gdp_capita <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>),  </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4} </span><span class="sc">\\</span><span class="st">[YR(</span><span class="sc">\\</span><span class="st">d{4})</span><span class="sc">\\</span><span class="st">]"</span>,  </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"gdp_per_capita"</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">country =</span> <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, year, gdp_per_capita)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>gdp_capita_long_format<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(gdp_capita_long_format<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>convert missing data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>gdp_capita_long_format <span class="ot">&lt;-</span> gdp_capita_long_format <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita =</span> <span class="fu">na_if</span>(gdp_per_capita, <span class="st">".."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>rename columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>gdp_capita_long_format <span class="ot">&lt;-</span> gdp_capita_long_format <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>join big mac data with gdp_per_capita</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data, gdp_capita_long_format, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inflation" class="level3">
<h3 class="anchored" data-anchor-id="inflation">inflation</h3>
<p>reformat to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>inflation_long_format <span class="ot">&lt;-</span> inflation <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>),  </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4} </span><span class="sc">\\</span><span class="st">[YR(</span><span class="sc">\\</span><span class="st">d{4})</span><span class="sc">\\</span><span class="st">]"</span>,  </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"inflation"</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">country =</span> <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, year, inflation)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>inflation_long_format<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(inflation_long_format<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>convert missing data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>inflation_long_format <span class="ot">&lt;-</span> inflation_long_format <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inflation =</span> <span class="fu">na_if</span>(inflation, <span class="st">".."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>rename columns in inflation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>inflation_long_format <span class="ot">&lt;-</span> inflation_long_format <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>join big mac data with inflation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data, inflation_long_format, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="unemployment" class="level3">
<h3 class="anchored" data-anchor-id="unemployment">unemployment</h3>
<p>reformat to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>unemployment_long_format <span class="ot">&lt;-</span> unemployment <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">Indicator Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Indicator Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>),  </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"unemployment"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">country =</span> <span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, year, unemployment)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>unemployment_long_format<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(unemployment_long_format<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>rename columns in unemployment</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>unemployment_long_format <span class="ot">&lt;-</span> unemployment_long_format <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>join big mac data with unemployment</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data, unemployment_long_format, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>take a look at the dataframe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(joined_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  country  year currency_code bmi_localprice bmi_usd_price bmi_change export_usd
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Argent…  2000 ARS                     2.5          2.5        NA     28181510.
2 Argent…  2001 ARS                     2.5          2.5         0     22619763.
3 Argent…  2002 ARS                     2.5          0.799       0      9838651.
4 Argent…  2003 ARS                     4.1          1.42       64     16066847.
5 Argent…  2004 ARS                     4.36         1.48        6.34  25007443.
6 Argent…  2005 ARS                     4.75         1.64        8.94  30870438.
# ℹ 6 more variables: import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;, GDP &lt;chr&gt;,
#   gdp_per_capita &lt;chr&gt;, inflation &lt;chr&gt;, unemployment &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="hdi" class="level3">
<h3 class="anchored" data-anchor-id="hdi">hdi</h3>
<p>select columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hdi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year   hdi
  &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Afghanistan  1990 0.273
2 Afghanistan  1991 0.279
3 Afghanistan  1992 0.287
4 Afghanistan  1993 0.297
5 Afghanistan  1994 0.292
6 Afghanistan  1995 0.31 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>hdi <span class="ot">&lt;-</span> hdi <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>joined_data2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data, hdi, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>joined_data2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 845 × 14
   country    year currency_code bmi_localprice bmi_usd_price bmi_change
   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 Argentina  2000 ARS                     2.5          2.5        NA   
 2 Argentina  2001 ARS                     2.5          2.5         0   
 3 Argentina  2002 ARS                     2.5          0.799       0   
 4 Argentina  2003 ARS                     4.1          1.42       64   
 5 Argentina  2004 ARS                     4.36         1.48        6.34
 6 Argentina  2005 ARS                     4.75         1.64        8.94
 7 Argentina  2006 ARS                     4.75         1.55        0   
 8 Argentina  2007 ARS                     8.25         2.67       73.7 
 9 Argentina  2008 ARS                    11            3.64       33.3 
10 Argentina  2009 ARS                    11.5          3.02        4.55
# ℹ 835 more rows
# ℹ 8 more variables: export_usd &lt;dbl&gt;, import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;,
#   GDP &lt;chr&gt;, gdp_per_capita &lt;chr&gt;, inflation &lt;chr&gt;, unemployment &lt;dbl&gt;,
#   hdi &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="population" class="level3">
<h3 class="anchored" data-anchor-id="population">population</h3>
<p>rename columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> population <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"Britain"</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Hong Kong SAR, China'</span> <span class="sc">~</span> <span class="st">'Hong Kong'</span>,</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Slovak Republic'</span> <span class="sc">~</span> <span class="st">'Slovakia'</span>,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'United Arab Emirates'</span> <span class="sc">~</span> <span class="st">'UAE'</span>,</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Viet Nam'</span> <span class="sc">~</span> <span class="st">'Vietnam'</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Turkiye'</span> <span class="sc">~</span> <span class="st">'Turkey'</span>,</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">'Venezuela, RB'</span> <span class="sc">~</span> <span class="st">'Venezuela'</span>,</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country  </span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(population)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year population
  &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1950    7480464
2 Afghanistan  1951    7571542
3 Afghanistan  1952    7667534
4 Afghanistan  1953    7764549
5 Afghanistan  1954    7864289
6 Afghanistan  1955    7971933</code></pre>
</div>
</div>
<p>join with big mac</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>joined_data2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(joined_data2, population, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="check-for-missing-data" class="level2">
<h2 class="anchored" data-anchor-id="check-for-missing-data">check for missing data</h2>
<p>drop tai wan change name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>big_mac_combined <span class="ot">&lt;-</span> joined_data2 <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">"Taiwan"</span>, country <span class="sc">!=</span> <span class="st">"Euro area"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>change column datatype</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>big_mac_combined <span class="ot">&lt;-</span> big_mac_combined <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">GDP =</span> <span class="fu">as.numeric</span>(GDP),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">inflation =</span> <span class="fu">as.numeric</span>(inflation),</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_per_capita =</span> <span class="fu">as.numeric</span>(gdp_per_capita)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(big_mac_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 15
  country  year currency_code bmi_localprice bmi_usd_price bmi_change export_usd
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Argent…  2000 ARS                     2.5          2.5        NA     28181510.
2 Argent…  2001 ARS                     2.5          2.5         0     22619763.
3 Argent…  2002 ARS                     2.5          0.799       0      9838651.
4 Argent…  2003 ARS                     4.1          1.42       64     16066847.
5 Argent…  2004 ARS                     4.36         1.48        6.34  25007443.
6 Argent…  2005 ARS                     4.75         1.64        8.94  30870438.
# ℹ 8 more variables: import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;, GDP &lt;dbl&gt;,
#   gdp_per_capita &lt;dbl&gt;, inflation &lt;dbl&gt;, unemployment &lt;dbl&gt;, hdi &lt;dbl&gt;,
#   population &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(big_mac_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   country               year      currency_code      bmi_localprice   
 Length:800         Min.   :2000   Length:800         Min.   :      1  
 Class :character   1st Qu.:2006   Class :character   1st Qu.:      6  
 Mode  :character   Median :2012   Mode  :character   Median :     21  
                    Mean   :2012                      Mean   :  15913  
                    3rd Qu.:2018                      3rd Qu.:    112  
                    Max.   :2022                      Max.   :4000000  
                                                                       
 bmi_usd_price     bmi_change         export_usd          import_usd       
 Min.   :0.640   Min.   :-100.000   Min.   :7.416e+06   Min.   :3.959e+06  
 1st Qu.:2.300   1st Qu.:   0.000   1st Qu.:7.120e+07   1st Qu.:6.518e+07  
 Median :2.978   Median :   2.565   Median :1.459e+08   Median :1.346e+08  
 Mean   :3.218   Mean   :   5.670   Mean   :2.862e+08   Mean   :2.609e+08  
 3rd Qu.:3.979   3rd Qu.:   8.065   3rd Qu.:3.285e+08   3rd Qu.:2.818e+08  
 Max.   :8.312   Max.   : 275.000   Max.   :3.292e+09   Max.   :3.383e+09  
                 NA's   :53         NA's   :53          NA's   :53         
   net_export              GDP            gdp_per_capita     inflation     
 Min.   :-963828693   Min.   :1.369e+10   Min.   :   739   Min.   :-3.686  
 1st Qu.: -23167201   1st Qu.:2.180e+11   1st Qu.:  5885   1st Qu.: 1.544  
 Median :   -804945   Median :3.908e+11   Median : 13447   Median : 2.849  
 Mean   :  25245050   Mean   :1.406e+12   Mean   : 23736   Mean   : 4.053  
 3rd Qu.:  29978044   3rd Qu.:1.103e+12   3rd Qu.: 39901   3rd Qu.: 5.062  
 Max.   :1587781425   Max.   :2.544e+13   Max.   :106177   Max.   :72.309  
 NA's   :53                                                NA's   :24      
  unemployment         hdi           population       
 Min.   : 0.130   Min.   :0.4750   Min.   :1.463e+06  
 1st Qu.: 3.745   1st Qu.:0.7320   1st Qu.:1.006e+07  
 Median : 5.280   Median :0.8340   Median :3.862e+07  
 Mean   : 6.375   Mean   :0.8134   Mean   :1.223e+08  
 3rd Qu.: 7.795   3rd Qu.:0.9080   3rd Qu.:1.044e+08  
 Max.   :28.840   Max.   :0.9620   Max.   :1.426e+09  
 NA's   :1        NA's   :53       NA's   :53         </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize data to find the range of years available for each country</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>year_summary <span class="ot">&lt;-</span> big_mac_combined <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">StartYear =</span> <span class="fu">min</span>(year), <span class="at">EndYear =</span> <span class="fu">max</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the summary</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(year_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53 × 3
   country    StartYear EndYear
   &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;
 1 Argentina       2000    2022
 2 Australia       2000    2022
 3 Azerbaijan      2021    2022
 4 Bahrain         2021    2022
 5 Brazil          2000    2022
 6 Britain         2000    2022
 7 Canada          2000    2022
 8 Chile           2000    2022
 9 China           2000    2022
10 Colombia        2004    2022
# ℹ 43 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your previous code to summarize StartYear and EndYear by country</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>year_summary <span class="ot">&lt;-</span> big_mac_combined <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">StartYear =</span> <span class="fu">min</span>(year), <span class="at">EndYear =</span> <span class="fu">max</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by StartYear and list countries along with their EndYear</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>grouped_summary <span class="ot">&lt;-</span> year_summary <span class="sc">%&gt;%</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(StartYear) <span class="sc">%&gt;%</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Countries =</span> <span class="fu">paste</span>(country, <span class="st">"(EndYear:"</span>, EndYear, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>, <span class="at">collapse =</span> <span class="st">"; "</span>),</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the grouped summary</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grouped_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  StartYear Countries                                                           
      &lt;dbl&gt; &lt;chr&gt;                                                               
1      2000 Argentina(EndYear:2022); Australia(EndYear:2022); Brazil(EndYear:20…
2      2001 Philippines(EndYear:2022)                                           
3      2002 Norway(EndYear:2022); Peru(EndYear:2022); Turkey(EndYear:2022)      
4      2003 Egypt(EndYear:2022)                                                 
5      2004 Colombia(EndYear:2022); Pakistan(EndYear:2022); Saudi Arabia(EndYea…
6      2011 India(EndYear:2022)                                                 
7      2021 Azerbaijan(EndYear:2022); Bahrain(EndYear:2022); Costa Rica(EndYear…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>filtered_big_mac_data <span class="ot">&lt;-</span> big_mac_combined <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2022</span>, <span class="dv">2023</span>)))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the first few rows of the filtered dataframe to confirm</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(filtered_big_mac_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 15
  country  year currency_code bmi_localprice bmi_usd_price bmi_change export_usd
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Argent…  2000 ARS                     2.5          2.5        NA     28181510.
2 Argent…  2001 ARS                     2.5          2.5         0     22619763.
3 Argent…  2002 ARS                     2.5          0.799       0      9838651.
4 Argent…  2003 ARS                     4.1          1.42       64     16066847.
5 Argent…  2004 ARS                     4.36         1.48        6.34  25007443.
6 Argent…  2005 ARS                     4.75         1.64        8.94  30870438.
# ℹ 8 more variables: import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;, GDP &lt;dbl&gt;,
#   gdp_per_capita &lt;dbl&gt;, inflation &lt;dbl&gt;, unemployment &lt;dbl&gt;, hdi &lt;dbl&gt;,
#   population &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Checking the missing data and highlighting the countries within the gdp_per_employed and inflation columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>missing_values_summary <span class="ot">&lt;-</span> filtered_big_mac_data <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(inflation)) <span class="sc">%&gt;%</span> <span class="co"># Adjust 'price' to the column you're interested in</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">MissingCount =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(country, year)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summary</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(missing_values_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 3
   country    year MissingCount
   &lt;chr&gt;     &lt;dbl&gt;        &lt;int&gt;
 1 Argentina  2000            1
 2 Argentina  2001            1
 3 Argentina  2002            1
 4 Argentina  2003            1
 5 Argentina  2004            1
 6 Argentina  2005            1
 7 Argentina  2006            1
 8 Argentina  2007            1
 9 Argentina  2008            1
10 Argentina  2009            1
# ℹ 12 more rows</code></pre>
</div>
</div>
<p>Impute the the inflation data for Argentina from <em>[World Data Info Link]</em>(https://www.worlddata.info/america/argentina/inflation-rates.php)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>arg_inflation_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/ARG_inflation_Data.xlsx"</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>arg_inflation_data_relevant <span class="ot">&lt;-</span> arg_inflation_data <span class="sc">%&gt;%</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, inflation)</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>filtered_big_mac_data_imputed <span class="ot">&lt;-</span> filtered_big_mac_data <span class="sc">%&gt;%</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inflation_arg =</span> <span class="fu">ifelse</span>(country <span class="sc">==</span> <span class="st">"Argentina"</span>, arg_inflation_data<span class="sc">$</span>inflation[<span class="fu">match</span>(year, arg_inflation_data<span class="sc">$</span>year)], <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inflation =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(inflation) <span class="sc">&amp;</span> country <span class="sc">==</span> <span class="st">"Argentina"</span>, inflation_arg, inflation)) <span class="sc">%&gt;%</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>inflation_arg)</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(filtered_big_mac_data_imputed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 747 × 15
   country    year currency_code bmi_localprice bmi_usd_price bmi_change
   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 Argentina  2000 ARS                     2.5          2.5        NA   
 2 Argentina  2001 ARS                     2.5          2.5         0   
 3 Argentina  2002 ARS                     2.5          0.799       0   
 4 Argentina  2003 ARS                     4.1          1.42       64   
 5 Argentina  2004 ARS                     4.36         1.48        6.34
 6 Argentina  2005 ARS                     4.75         1.64        8.94
 7 Argentina  2006 ARS                     4.75         1.55        0   
 8 Argentina  2007 ARS                     8.25         2.67       73.7 
 9 Argentina  2008 ARS                    11            3.64       33.3 
10 Argentina  2009 ARS                    11.5          3.02        4.55
# ℹ 737 more rows
# ℹ 9 more variables: export_usd &lt;dbl&gt;, import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;,
#   GDP &lt;dbl&gt;, gdp_per_capita &lt;dbl&gt;, inflation &lt;dbl&gt;, unemployment &lt;dbl&gt;,
#   hdi &lt;dbl&gt;, population &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Will now, remove the data from Venezuela as it has both missing datas from gdp and inflation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>cleaned_big_mac_data <span class="ot">&lt;-</span> filtered_big_mac_data_imputed <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">"Venezuela"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_big_mac_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 15
  country  year currency_code bmi_localprice bmi_usd_price bmi_change export_usd
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Argent…  2000 ARS                     2.5          2.5        NA     28181510.
2 Argent…  2001 ARS                     2.5          2.5         0     22619763.
3 Argent…  2002 ARS                     2.5          0.799       0      9838651.
4 Argent…  2003 ARS                     4.1          1.42       64     16066847.
5 Argent…  2004 ARS                     4.36         1.48        6.34  25007443.
6 Argent…  2005 ARS                     4.75         1.64        8.94  30870438.
# ℹ 8 more variables: import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;, GDP &lt;dbl&gt;,
#   gdp_per_capita &lt;dbl&gt;, inflation &lt;dbl&gt;, unemployment &lt;dbl&gt;, hdi &lt;dbl&gt;,
#   population &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert year to numeric to ensure proper filtering</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>cleaned_big_mac_data<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(cleaned_big_mac_data<span class="sc">$</span>year))</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for years 2002 to 2021</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>data_2002_2021 <span class="ot">&lt;-</span> cleaned_big_mac_data <span class="sc">%&gt;%</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2002</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2021</span>)</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify countries with data for each year from 2002 to 2021</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>countries_with_complete_data <span class="ot">&lt;-</span> data_2002_2021 <span class="sc">%&gt;%</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n_distinct</span>(year) <span class="sc">==</span> (<span class="dv">2021</span> <span class="sc">-</span> <span class="dv">2002</span> <span class="sc">+</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>countries_with_complete_data <span class="ot">&lt;-</span> countries_with_complete_data <span class="sc">%&gt;%</span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">ifelse</span>(country <span class="sc">==</span> <span class="st">"Britain"</span>, <span class="st">"United Kingdom"</span>, country),</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">country =</span> <span class="fu">ifelse</span>(country <span class="sc">==</span> <span class="st">"Czech Republic"</span>, <span class="st">"Czech Rep."</span>, country),</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">country =</span> <span class="fu">ifelse</span>(country <span class="sc">==</span> <span class="st">"South Korea"</span>, <span class="st">"Korea"</span>, country),</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">country =</span> <span class="fu">ifelse</span>(country <span class="sc">==</span> <span class="st">"Switzerland"</span>, <span class="st">"Switzerland"</span>, country))</span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co"># View the first few rows to confirm</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(countries_with_complete_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 15
  country  year currency_code bmi_localprice bmi_usd_price bmi_change export_usd
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Argent…  2002 ARS                     2.5          0.799       0      9838651.
2 Argent…  2003 ARS                     4.1          1.42       64     16066847.
3 Argent…  2004 ARS                     4.36         1.48        6.34  25007443.
4 Argent…  2005 ARS                     4.75         1.64        8.94  30870438.
5 Argent…  2006 ARS                     4.75         1.55        0     37603723.
6 Argent…  2007 ARS                     8.25         2.67       73.7   49020947.
# ℹ 8 more variables: import_usd &lt;dbl&gt;, net_export &lt;dbl&gt;, GDP &lt;dbl&gt;,
#   gdp_per_capita &lt;dbl&gt;, inflation &lt;dbl&gt;, unemployment &lt;dbl&gt;, hdi &lt;dbl&gt;,
#   population &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="combine-with-country" class="level2">
<h2 class="anchored" data-anchor-id="combine-with-country">combine with country</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>country_all <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> <span class="fu">unique</span>(countries_with_complete_data<span class="sc">$</span>country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>map continent</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>continent_mapping <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Australia"</span>, <span class="st">"Brazil"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Canada"</span>, <span class="st">"Chile"</span>, <span class="st">"China"</span>, <span class="st">"Czech Rep."</span>, <span class="st">"Denmark"</span>, <span class="st">"Hong Kong"</span>, <span class="st">"Hungary"</span>, <span class="st">"Indonesia"</span>, <span class="st">"Japan"</span>, <span class="st">"Malaysia"</span>, <span class="st">"Mexico"</span>, <span class="st">"New Zealand"</span>, <span class="st">"Peru"</span>, <span class="st">"Philippines"</span>, <span class="st">"Poland"</span>, <span class="st">"Russia"</span>, <span class="st">"Singapore"</span>, <span class="st">"South Africa"</span>, <span class="st">"Korea"</span>, <span class="st">"Sweden"</span>, <span class="st">"Switzerland"</span>, <span class="st">"Thailand"</span>, <span class="st">"Turkey"</span>, <span class="st">"United States"</span>),</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">continent =</span> <span class="fu">c</span>(<span class="st">"South America"</span>, <span class="st">"Oceania"</span>, <span class="st">"South America"</span>, <span class="st">"Europe"</span>, <span class="st">"North America"</span>, <span class="st">"South America"</span>, <span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Europe"</span>, <span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Asia"</span>, <span class="st">"Asia"</span>, <span class="st">"Asia"</span>, <span class="st">"North America"</span>, <span class="st">"Oceania"</span>, <span class="st">"South America"</span>, <span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Europe"</span>, <span class="st">"Asia"</span>, <span class="st">"Africa"</span>, <span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Europe"</span>, <span class="st">"Asia"</span>, <span class="st">"Asia"</span>, <span class="st">"North America"</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the continent mapping with your original DataFrame 'df'</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>country_all <span class="ot">&lt;-</span> <span class="fu">merge</span>(country_all, continent_mapping, <span class="at">by =</span> <span class="st">"country"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>map g7, g20, eu</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>g7_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Canada"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>, <span class="st">"Italy"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"Japan"</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>g20_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Australia"</span>, <span class="st">"Brazil"</span>, <span class="st">"Canada"</span>, <span class="st">"China"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>, <span class="st">"India"</span>, <span class="st">"Indonesia"</span>, <span class="st">"Italy"</span>, <span class="st">"Japan"</span>, <span class="st">"Mexico"</span>, <span class="st">"Russia"</span>, <span class="st">"Saudi Arabia"</span>, <span class="st">"South Africa"</span>, <span class="st">"South Korea"</span>, <span class="st">"Turkey"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"United States"</span>, <span class="st">"European Union"</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>eu_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Austria"</span>, <span class="st">"Belgium"</span>, <span class="st">"Bulgaria"</span>, <span class="st">"Croatia"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Czech Rep."</span>, <span class="st">"Denmark"</span>, <span class="st">"Estonia"</span>, <span class="st">"Finland"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>, <span class="st">"Greece"</span>, <span class="st">"Hungary"</span>, <span class="st">"Ireland"</span>, <span class="st">"Italy"</span>, <span class="st">"Latvia"</span>, <span class="st">"Lithuania"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Malta"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Poland"</span>, <span class="st">"Portugal"</span>, <span class="st">"Romania"</span>, <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Spain"</span>, <span class="st">"Sweden"</span>)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>brics_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brazil"</span>, <span class="st">"Russia"</span>, <span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"South Africa"</span>,<span class="st">"Egypt"</span>,<span class="st">"Ethiopia"</span>,<span class="st">"Iran"</span>,<span class="st">"United Arab Emirates"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>country_all <span class="ot">&lt;-</span> country_all <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">g7 =</span> country <span class="sc">%in%</span> g7_countries,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">g20 =</span> country <span class="sc">%in%</span> g20_countries,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">eu =</span> country <span class="sc">%in%</span> eu_countries,</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">brics =</span> country <span class="sc">%in%</span> brics_countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>take a look at the countries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(country_all)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country     continent    g7   g20    eu brics
1 Argentina South America FALSE  TRUE FALSE FALSE
2 Australia       Oceania FALSE  TRUE FALSE FALSE
3    Brazil South America FALSE  TRUE FALSE  TRUE
4    Canada North America  TRUE  TRUE FALSE FALSE
5     Chile South America FALSE FALSE FALSE FALSE
6     China          Asia FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save cleaned_big_mac_data dataframe to a CSV file</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(countries_with_complete_data, <span class="at">file =</span> <span class="st">"data/bmi_data.csv"</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(country_all, <span class="at">file =</span> <span class="st">"data/country_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>